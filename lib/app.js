// Generated by CoffeeScript 1.7.1
(function() {
  var StormFlash, agent, argv, config, storm, _ref, _ref1, _ref2;

  argv = require('minimist')(process.argv.slice(2));

  if (argv.h != null) {
    console.log("-h view this help\n-p port number\n-l logfile\n-d datadir");
    return;
  }

  config = {};

  config.port = (_ref = argv.p) != null ? _ref : 5000;

  config.logfile = (_ref1 = argv.l) != null ? _ref1 : "/var/log/stormflash.log";

  config.datadir = (_ref2 = argv.d) != null ? _ref2 : "/var/stormstack";

  storm = config.storm;

  storm = {
    provider: "openstack",
    tracker: "https://allow@stormtracker.dev.intercloud.net",
    skey: "some-secure-serial-key",
    id: "testing-uuid",
    bolt: {
      cert: "",
      key: "",
      ca: "",
      uplinks: ["bolt://stormtower.dev.intercloud.net"],
      uplinkStrategy: "round-robin",
      allowRelay: true,
      relayPort: 8017,
      allowedPorts: [5000],
      listenPort: 443,
      beaconInterval: 10,
      beaconRetry: 3
    }
  };

  StormFlash = require('./stormflash');

  agent = new StormFlash(config);

  agent.on("running", function() {
    return agent.log("ready to take over the world!");
  });

  agent.run();

}).call(this);
